{"componentChunkName":"component---src-templates-blog-post-js","path":"/hoisting/","result":{"data":{"site":{"siteMetadata":{"title":"neekoblog"}},"markdownRemark":{"id":"766314f6-9f3c-5904-8402-71618754a1e5","excerpt":"…","html":"<p><em>들어가면서.</em></p>\n<p>자바스크립트 코어를 공부하면서 호이스팅과 실행 컨텍스트에 대해서 공부했다.\n호이스팅은 너무 유명한 개념에다가 거의 기본 개념 같은 거지만 코어에서 빠지지 않고 나오는 것 같다.\n그래서 과거에 정리했던 것보다 더 자세히 정리하고자 추가했다.</p>\n<p>호스팅 하면 실행 컨텍스트에 대한 내용을 빼먹을 수 없는데\n호이스팅과 비교하면 매우 머리 아프고 복잡한 과정이다.🥲</p>\n<p>솔직히 한 번만 보고 이해할 수 있다면 당신은 대단한 사람입니다.</p>\n<p>이번 포스팅은 modern javascript 책을 적극 참고해서 작성하였다.</p>\n<hr>\n<h3>호이스팅이 무엇인가?</h3>\n<p>Hoisting이라는 언어는 끌어올리다는 의미이다.</p>\n<p>js 엔진이 코드를 실행하기 전에 변수나 함수를 메모리에 저장하는데<br>\n이게 끌어올려서 저장하는 것처럼 보였나.. 그래서 <strong>호이스팅</strong>이라고 한다.</p>\n<p>js 엔진이라는 얘기가 나왔다.<br>\n그 엔진이 어떻게 하길래 변수나 함수만 쏙 쏙 메모리에 저장한다는 것일까?</p>\n<p>쉽게 말하면 javascript가 코드를 실행하기 전에 먼저 쭉 보면서 평가를 한다.<br>\n<strong>'아 여기 x라는 변수 있고... add라는 함수 있고..'</strong><br>\n이런 식으로 말이다.</p>\n<p>그러면서 <strong>여기 x 있다~ add 있다~ 얘네 저장될 공간 좀 미리 만들어줘~</strong>\n이게 호이스팅이다.</p>\n<p>var로 선언하거나 함수 선언문으로 만들어진 애들은<br>\n할당되기 전에 참조할 수 있는 상태가 된다. Reference Error가 나지 않는다.</p>\n<p>이때 변수 선언문이 var로 작성된 애들과 ES6 문법 이후에 let과 const로 선언된 애들은 <strong>다르게 호이스팅된다.</strong><br>\n둘 다 코드를 평가하면서 메모리를 주는데 그 메모리 환경이 다르다.</p>\n<p>var는 전역 객체로 저장되는 곳으​로 가고\nlet과 const는 선언만 되는 곳으로 간다.</p>\n<p>그래서 var나 함수 선언문으로 만들어진 애들은 Reference Error가 나지 않는 것이다.<br>\n반면 let과 const는 선언만 되었고 초기화는 안되었기 때문에 참조할 수 없는 상태이다.<br>\n따라서 Reference Error가 발생한다.</p>\n<p>함수 선언문이라는 말을 자주 사용했다.</p>\n<p><em>함수 선언문과 함수 표현식은 다르다.</em></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">a</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이렇게 표현식은 변수만 호이스팅되고 함수 자체는 실행되지 않는다.<br>\n하지만</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이렇게 선언문은 var와 같이 호이스팅되어 함수 자체를 실행 가능하게 한다.</p>\n<hr>\n<p>호이스팅 하면 실행 컨텍스트가 빠질 수 없다.</p>\n<p>실행 컨텍스트를 이해하면 호이스팅에 대해 더 자세히 알 수 있다.</p>\n<h4>먼저 실행 컨텍스트가 무엇인가?</h4>\n<p>코드를 실행하는데 필요한 환경을 제공하고 실행 결과를 관리하는 영역이다.<br>\n실행 흐름을 관리하는 역할이다.</p>\n<p>이렇게만 들으면 감이 잘 안 온다.😅<br>\n일단 실행 컨텍스트가 생기는 과정부터 이해해 보자</p>\n<p>ECMA script가 소스를 먼저 구분하고 그에 맞게 실행 컨텍스트가 생긴다.</p>\n<ol>\n<li>전역 코드 - 전역 실행 컨텍스트</li>\n<li>함수 코드 - 함수 실행 컨텍스트</li>\n<li>Eval 코드 - Eval 실행 컨텍스트</li>\n<li>module 코드 - module 실행 컨텍스트</li>\n</ol>\n<p>위와 같이 구분하고 각 코드마다 실행 컨텍스트가 생성된다.</p>\n<p>코드들은 평가된 후에 실행 컨텍스트가 생성되고 소스코드가 실행된다.<br>\njs는 코드를 실행하기 전에 평가와 실행 컨텍스트 생성 과정을 통해 준비를 한다고 생각하면 된다.</p>\n<hr>\n<p><strong>1. 전역 코드와 전역 실행 컨텍스트</strong>\n전역 변수 등을 관리하기 위한 최상위의 전역 스코프를 생성하는데 이 스코프를 전역 실행 컨텍스트가 관리한다.<br>\n해당 스코프의 전역 변수들은 전역 객체와 연결된다.</p>\n<p>이 과정은 전역 코드가 평가될 때 실행된다.</p>\n<p><strong>2. 함수 코드와 함수 실행 컨텍스트</strong>\n지역 스코프를 생성하고 그 안의 지역 변수, 매개변수, arguments 객체를 관리한다.<br>\n지역 스코프는 전역 스코프에서 시작하는 스코프 체인의 하나로 연결된다.</p>\n<p>마찬가지로 함수 코드가 평가될 때 실행된다.</p>\n<p><strong>3. Eval 코드와 Eval 실행 컨텍스트</strong>\nstrict mode에서 자신만의 독자적인 스코프를 생성하고 관리한다.</p>\n<p>eval()은 js에서 문자열로 된 코드를 실행할 수 있는 함수이다.<br>\n일반적인 상황에서 eval은 아래와 같이 쓰인다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> x <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n<span class=\"token function\">eval</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"var y = 20; console.log(x);\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 10 출력 -> 현재 스코프의 x에 '접근' 가능하다.</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> y<span class=\"token punctuation\">)</span> <span class=\"token comment\">// \"number\"</span></code></pre></div>\n<p>하지만 strict 모드에서는</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token string\">\"use strict\"</span>\n\n<span class=\"token keyword\">var</span> x <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n<span class=\"token function\">eval</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"var y = 20; console.log(x);\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 10 출력 x는 현재 스코프에서 참조 가능</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> y<span class=\"token punctuation\">)</span> <span class=\"token comment\">//y는 독립된 스코프에 존재하기 때문에 'undefined'출력</span></code></pre></div>\n<p>이렇게 독자적인 스코프를 가질 수 있다는 의미이다.</p>\n<p><strong>4. module 코드와 module 실행 컨텍스트</strong>\n모듈별로 독자적인 스코프를 생성하고 관리한다.</p>\n<p>module 개념이 ES6 이후에 나온 개념이다.<br>\n모듈은 다른 모듈이나 전역 스코프와 독립적으로 동작한다.<br>\nimport export 키워드를 통해서 다른 모듈의 값에 접근할 수 있는 상황을 생각하면 편하다.</p>\n<hr>\n<p>이렇게 생성된 실행 컨텍스트들은 선언문으로 생성된 변수나 함수를 해당 컨텍스트가 관리하는 스코프에 등록한다.<br>\n그 스코프는 Lexical Environment의 레코드이다.</p>\n<p>Lexical Environment의 끝날 때쯤 설명하겠다.<br>\n그냥 이런 게 있구나 하고 넘어가자.🫠</p>\n<p>예시를 보면서 더 자세히 이해해 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> x <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> x <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a <span class=\"token operator\">+</span> x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">)</span></code></pre></div>\n<p>이렇게 코드가 있으면 먼저 코드를 싹 돌면서 평가를 한다.<br>\n\"아.. 여기 x... y.. add 있구나.. 얘네 미리 메모리 공간 줘~\" 평가하면서 이 과정도 거친다.</p>\n<p>이걸 <strong>호이스팅</strong>이라고 했다.<br>\n호이스팅 과정에서 전역 객체에 프로퍼티와 메서드가 추가되는 것이다.<br>\n이게 <strong>첫 번째 과정인 전역 코드 평가</strong>이다.</p>\n<p>이후에 런타임이 시작된다. 코드를 실행하면서 변수에 값이 할당되거나 함수가 호출되는 것이다.<br>\n이때 함수를 만나면 \"전역 코드 실행 멈춰~나 add라는 함수 만났어\"를 한다.<br>\n이건 <strong>두 번째 과정인 전역 코드 실행</strong> 과정이다.</p>\n<p>전역 코드 실행을 멈추고 함수 코드가 평가되면서 지역 스코프에 변수들이 선언된다.<br>\n\"add라는 함수 안에 들어왔는데 여기 x 있고.. y 있고.. console.log도 있어~\"이런 식으로 말이다.<br>\n이때 arguments 객체가 생성되어 지역 스코프에 같이 등록되고 this 바인딩도 결정된다.<br>\n세 번째 과정인 <strong>함수 코드 평가</strong> 과정이다.</p>\n<p>이후에 코드가 실행되는 런타임이 시작된다. 함수 코드가 실행되면서 변수에 값이 할당되고 console을 찾아 log 함수도 실행한다.<br>\n\"add 안에 x한테 1 y한테 2 줘 그리고 console이라는 애가 어떤 앤지 찾아봐봐, 찾았어? 거기에 Log 있어? 아 함수야? 그거 실행시켜\" 이렇게 된다.<br>\n이건 네 번째 과정인 <strong>함수 코드 실행 과정</strong>이다.</p>\n<p>네 번째 과정에서 console을 찾는 방법을 간략하게 설명하자면<br>\nconsole이라는 애는 코드상에서 따로 정의되어 있는 게 보이지 않는다. 이건 전역 객체의 프로퍼티로 존재하는데<br>\n지역 스코프에서 어떻게 전역 객체의 프로퍼티로 접근하냐면<br>\n지역 스코프와 (전역 객체 프로퍼티가 존재하는) 전역 스코프는 스코프 체인으로 연결되어 있다.<br>\n그래서 참조를 따라가서 전역 스코프에서 찾아내는 것이다.</p>\n<p>예시를 통해 봤던 위의 과정을 실행 컨텍스트가 관리한다.\n그러면 초반에 설명했던<br>\n실행 컨텍스트는 \"코드를 실행하는데 필요한 환경을 제공하고 실행 결과를 관리하는 영역이다.<br>\n실행 흐름을 관리하는 역할이다.\"라고 했던 게 조금은 이해가 될 것이다.</p>\n<hr>\n<p>조금만 더 깊게 살펴보자🤔<br>\n실행 컨텍스트는 위의 과정을 어떻게 실행하나?<br>\n실행 컨텍스트는 흐름은 실행 컨텍스트의 stack으로 식별자와 스코프는 Lexical environment로 관리한다.<br>\n그러면 위에서 잠깐 보고 넘어갔던 Lexical Environment가 실행 컨텍스트에서 식별자랑 스코프 관리하는 데에 쓰이는 것이라는 것을 알 수 있다.</p>\n<h4>실행 컨텍스트 스택</h4>\n<p>예시 코드를 통해 살펴보자</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> x <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> x <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">change</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    x <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n    y <span class=\"token operator\">=</span> <span class=\"token number\">4</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">change</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">)</span></code></pre></div>\n<p>이런 코드가 있다.</p>\n<p>이때 스택 전체를 살펴보면\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/neekoblog/static/021440b8d7ebd854e8b947241390a404/612f7/contextStack.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABTElEQVR42lWQPW7CUBCEfSlEKnIgRA4AgQMgBUGUIigICBTIEmAhIox/sFEaQhrMrw3YAoGh4g6Tt6u4oNjizez7dnal2+0G3/dxPB5xOp0QBAHO5zMOhwPrpG23W67Ij3ojn2q/34NYEj1msxlc18Vut8N8PmfT8zz+aBgGYrEYEokENE1jjXwaQL3RMGJQECkMQywWCxapcbVaMVgdDqGqKhRFwUM8jkcBbLfbrOm6zv3L5ZL/REEul8s9MAh8kdTDer1BJp1GMplEpVLBcyaDXC6H93IZT6kUstksD6ataO07IMV0HIeBo9EIzWYTtmUJ0Ade8nl89ft4LRbxViqh1+uhWCigVq3CNE00Gg0YIi1BHbEyhZOu16tItOZjmwL4Wa/jezzGYDCA3GrhdzpFt9uF0ungZzKBLMvQxTks20a9VoPxf1dKTKw/McOJYY8OT78AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"contextstack\"\n        title=\"\"\n        src=\"/neekoblog/static/021440b8d7ebd854e8b947241390a404/0b533/contextStack.png\"\n        srcset=\"/neekoblog/static/021440b8d7ebd854e8b947241390a404/fac75/contextStack.png 125w,\n/neekoblog/static/021440b8d7ebd854e8b947241390a404/63868/contextStack.png 250w,\n/neekoblog/static/021440b8d7ebd854e8b947241390a404/0b533/contextStack.png 500w,\n/neekoblog/static/021440b8d7ebd854e8b947241390a404/1d69c/contextStack.png 750w,\n/neekoblog/static/021440b8d7ebd854e8b947241390a404/612f7/contextStack.png 773w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>아까 위에서 예시로 계속 설명했던 실행 컨텍스트의 실행 과정과 함께 보면 이해가 '빡' 될 것이다.<br>\n이렇게 스택으로 관리하기 때문에<br>\n전역 실행 컨텍스트가 일을 멈추고 함수 실행 컨텍스트에서 일을 하고 다시 돌아오는 등의 과정이 있을 수 있는 것이다.</p>\n<hr>\n<h3>Lexical Environment</h3>\n<p>조금 어려울 수 있는 Lexical Environment에 대해서 살펴보자<br>\n간단하게 식별자와 그 값 그리고 상위 스코프에 대한 참조를 기록하는 자료구조이다.\n조금 더 간단하게는 <strong>스코프와 식별자를 관리하는 저장소</strong>이다.</p>\n<p>예시 코드로 보면 아래의 그림과 같이 해석할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/neekoblog/static/6213151f003e1d36b0af1c0e6b0eb00f/612f7/environment.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.199999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAACUElEQVR42j2SbU+SURjH+RptbZrz4eZBBAFFMFEbs9V0veojtFm+ylfNyrH1pi+gnwB1bqZWwyAWDm01ZunU0mlqaSKEoIg8CPfNr8Ot82z/XTvXuc7/XOd3jmZ4yEOPu5e7fQ/p7ukT6sV97wE2ZzfTM+8olYrk8wXC4TCjo6NMTEwwNjZ2La/Xy/j4OCMjIwQCATSeZ4/otEm43U6cHWZsrRIORyM6/Q1mZqeojPPzc0KhkGrg9/tV+Xw+NQaDQVWTk5PMz8+jeeV5jFlrwmrvwGBuoUHfhM5oRdJX4w/MqoaKohCPxygU8iSTx6LjPJnMmXrQWTotcklyuZzIZdA8H+qntkaP2dSG0dSO1mCmVtdMTX0Vcx8uDctlhehRjN29fX5ubPFnP8ra+ibLy2tEIt/58nWJjc1tYvEEmpceYWiwYrK5kESUDM3U6S3USdV8DFxeWZZLlJUCSulExLMKBOKxbfZ2Vkj8+8Xx8R5lOY0iZ9EMD/dTJdkwWl3oGu1IjTbRoZV6bTWfgl6xuYBcTCOnXiMfthJd7eL30m12Ik7+rrg4WO4ktn6H4kELcvJFxfAJks6CxWZFa6zwaxIsLSrDubnZqw4VlHyEci5MNrVA7vQzuVSI/OkCmeQC2ZNFsbYoar6hGRwcwNJqwO4UclyqvcNEg/YmU9Nvrg2RYwKmwkWhIJhWwOZFLKrzymOpOeUUzcDTIcyOHpyu++LvuWm2d2Ft6+ZWg4m3731XhqJaPhIMj0gmtijkDsXmKBfZHVKJHxzHVynmdkVNlP+omwwsi26aswAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"environment\"\n        title=\"\"\n        src=\"/neekoblog/static/6213151f003e1d36b0af1c0e6b0eb00f/0b533/environment.png\"\n        srcset=\"/neekoblog/static/6213151f003e1d36b0af1c0e6b0eb00f/fac75/environment.png 125w,\n/neekoblog/static/6213151f003e1d36b0af1c0e6b0eb00f/63868/environment.png 250w,\n/neekoblog/static/6213151f003e1d36b0af1c0e6b0eb00f/0b533/environment.png 500w,\n/neekoblog/static/6213151f003e1d36b0af1c0e6b0eb00f/1d69c/environment.png 750w,\n/neekoblog/static/6213151f003e1d36b0af1c0e6b0eb00f/612f7/environment.png 773w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>실행 컨텍스트마다 Lexical Environment가 존재하는데 전역 실행 컨텍스트에 선언되고 할당되는<br>\nx와 y 그리고 add 함수는 Global Lexical Environment에 저장된다.</p>\n<p>함수 실행 컨텍스트에 선언되어 있는 x와 y 그리고 change는<br>\nAdd 함수 Lexical Environment에 저장된다.<br>\n그리고 이 둘은 scope chain으로 연결된다.</p>\n<p>코드로 이해했으니 실제 실행 컨텍스트와 Lexical Environment가 어떻게 연결되어 있는지 보자.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/neekoblog/static/b6d2a17b27f809cc4e55b835a2d3deed/612f7/lexical.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA00lEQVR42lWQS6tGUBhG/XgGTA3kdiITkpFvdsQ/IQlJLoXCxnO+d5fBeWvNVuvZbcF1XSiKAl3XoaoqR9M0GIYBWZbheR7onudB0zQoigJt26Ku63/keY6u6yCkaQrf9xGGIYIgwCf+4DdJkHyJ4xhZlmHfd8zzDNM0IUkSH7MsC7b95ceG4zgQRRFRFEFY1xXDMKDve4zjiPM88d593ziOA9u28ShBDr2QBshljIFdjLvXdUGgWFmWqKqKsywLl0h+Q+/ROIXImaaJj9FXUOwN/gFTyBmCJ53SaAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"lexical\" title=\"\" src=\"/neekoblog/static/b6d2a17b27f809cc4e55b835a2d3deed/0b533/lexical.png\" srcset=\"/neekoblog/static/b6d2a17b27f809cc4e55b835a2d3deed/fac75/lexical.png 125w,\n/neekoblog/static/b6d2a17b27f809cc4e55b835a2d3deed/63868/lexical.png 250w,\n/neekoblog/static/b6d2a17b27f809cc4e55b835a2d3deed/0b533/lexical.png 500w,\n/neekoblog/static/b6d2a17b27f809cc4e55b835a2d3deed/1d69c/lexical.png 750w,\n/neekoblog/static/b6d2a17b27f809cc4e55b835a2d3deed/612f7/lexical.png 773w\" sizes=\"(max-width: 500px) 100vw, 500px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>먼저 실행 컨텍스트는 Lexical Environment와 variavle Environment 두 가지의 Component로 구성된다.<br>\n생성 초기 두 컴포넌트는 같은 Lexical Environment를 참조한다.<br>\nLexical Environment은 식별자를 어디에서 참조할 것인지 등을 알려주는 곳이다.<br>\n하지만 variable 환경을 위한 새로운 Lexical Environment 환경이 새로 생기면 다른 곳을 참조하게 된다.<br>\n보통 var가 variable Environment Component에 저장된다.</p>\n<p>해당 <strong>스코프의 식별자들을 등록하고 바인딩 된 값을 관리</strong>하는 Lexical Environment Component는<br>\nEnvironmentRecord와 OuterLexicalEnvironmentReference로 구성되어 있다.</p>\n<p>EnvironmentRecord는 해당 스코프에 포함된 식별자를 등록하고 바인딩 된 값을 관리하는 저장소이고<br>\nOuterLexicalEnvironmentReference는 상위 스코프를 가리키며 상위 코드의 렉시 컬 환경을 가리키는 저장소라고 볼 수 있다.</p>\n<p><strong>따라서 Lexical Environment는 참조를 통한 Linked List Scope Chain를 구성한다.</strong></p>\n<hr>\n<h4>실행 컨텍스트가 Lexical Environment를 통해 식별자를 어떻게 검색하는지 알아보자</h4>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> x <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이런 코드가 있을 때 아래의 과정을 거친다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/neekoblog/static/e06ccaf52bf1d55babf9465b870acbd7/612f7/flow1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQElEQVR42pVSy4rCQBCc7/biPYIIkpj4Ax78Ak8eAhKCpxyDBBU1DwPBvNBorKUalKzswu5A0T0909XVPaPm8zlmsxm61rIsbLdbcD0eDzyfzz9D2baNxWKB5XKJ9XoN13XhOA6yLBNCXvrPUi/mtm0lkOf5e0//crl8Q1EUaJoGZVkKuH/5VVVBTadTjMdjGIYBXdfF1zRNVLJ1nnfB2Gq1Qr/fF4xGIwwGA/R6PQyHQ6jD4SDz2u12At/34XkeoihCHMfYbDY4n8+4Xq9iGSP2+73cPx6PIAf90+kEVde1yKZctsrE+/0uRczJRBSZpvm2RBiGMh7mcrFdzpx7RQI6t9tN5sZDzipJEqlMJbSvTqiIClmUP+ATisxBECBNUwmQkEPng9Ay8RPMYfEfv033ybsHJKdqktJ2QdLfvs0XgwqS9HO1uGAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"lexical\"\n        title=\"\"\n        src=\"/neekoblog/static/e06ccaf52bf1d55babf9465b870acbd7/0b533/flow1.png\"\n        srcset=\"/neekoblog/static/e06ccaf52bf1d55babf9465b870acbd7/fac75/flow1.png 125w,\n/neekoblog/static/e06ccaf52bf1d55babf9465b870acbd7/63868/flow1.png 250w,\n/neekoblog/static/e06ccaf52bf1d55babf9465b870acbd7/0b533/flow1.png 500w,\n/neekoblog/static/e06ccaf52bf1d55babf9465b870acbd7/1d69c/flow1.png 750w,\n/neekoblog/static/e06ccaf52bf1d55babf9465b870acbd7/612f7/flow1.png 773w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>위에서 열심히 읽어도 이해가 안 가는 게 정상이다..</p>\n<p>차근차근 살펴보자</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/neekoblog/static/04b0b58d888ebda0f5eaa2cdc1a4d920/9bbaf/flow1-1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 117.60000000000002%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAABYlAAAWJQFJUiTwAAADG0lEQVR42pVUyzPjQRCeP8/iwjFbq6hyWpbEc2OLRDzWNaGKWuXi5pUQlIOTo1dRlAQJkiCqKO9HvL+dr+3wE7tiu+r79UxPd8/Mr78edXx8jEQigZ2dHcTjccQ04n8Qi8VEc/1ZJ17WjY2x1GdnZ1C9vb2w2WwoLi5GZWUlqqurYbfb4XA4UFv7Hd/KylBaWoqqqirRtBN2B33s+FpSIrHMMTExAdXV1YWsrCzk5eWJo6exEa2trXA6naivr4dbz10NDWhpaYGzrg4VFRVo0HOPx6P9fkrC/Px8ZH/KxsjwMNT8/DwCgQDGx8cxOjqKYDCIkZGgaII2f8CPgf5+DA4OCoaGhuD3a9vAgIwZ39fXh3A4DHV+fi7/YHNzE6FQCGtra/Lvtra2RK+vr+Pw8BCUx8dH0ff390ilUkiX29vbp4QMZEIGb29vyw82emNjA0dHR7i7u8PNzY0E7u3tYW5uTsa0MRHBTRR3MztTW/Hw8CCayQgGcc4Ts8LmVGaduZQJzATjRyHVeAOKWTOHUvgPMUH8BZFI5JXNiJqamoLX60VnZyd8Pt8TvD60t7eL3dg4p+7o6EBbWxvqNIU4po3Uo+/i4iJUd/cv5GTnoKioSPjX1NQkHKupqREeulwuHfwDzc3Nwj8Dt9sta/SxfbYhNzdXaKZ6enqE1IWFhUJsEpddUaIJy84haC8vLxdwnZ1UpjuIa9RfCgqE3GNjY1DJZFLoEo1GNTFXhZzhMPloxmHhJ/Xq6ovNCsYyx/7+PhTLnklMJTOJENuQ9T0hv6x8+xeur6+hTk5OpBvYKWw3dsHu7q60I6lBm7X13gMPJwmjkagE861jG4ZWVnTSpIy52cHBwYd4KldO/4ecX1xcvPmHvHambpIT8pPpKibZh65sGj5Twr9VOd0mV07pypimN07pCThPv7L1RXp1ZZJxZmYGy8vL0ot8wRcWFoTES0tLYkt/CHgSNgQZYa2+JCR3+DDSaUVXd3JyEtPT05L09PRUnLhuPTHns7OzQinrRs9FMY8jx5eXl1Llq6urZzs3s77Mxm4eXSt+Aw4/nqcY1SZHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"lexical\" title=\"\" src=\"/neekoblog/static/04b0b58d888ebda0f5eaa2cdc1a4d920/0b533/flow1-1.png\" srcset=\"/neekoblog/static/04b0b58d888ebda0f5eaa2cdc1a4d920/fac75/flow1-1.png 125w,\n/neekoblog/static/04b0b58d888ebda0f5eaa2cdc1a4d920/63868/flow1-1.png 250w,\n/neekoblog/static/04b0b58d888ebda0f5eaa2cdc1a4d920/0b533/flow1-1.png 500w,\n/neekoblog/static/04b0b58d888ebda0f5eaa2cdc1a4d920/9bbaf/flow1-1.png 588w\" sizes=\"(max-width: 500px) 100vw, 500px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>컨텍스트 스택으로 잠시 올라가서 보자<br>\n맨 처음 실행 컨텍스트 스택에서 전역 실행 컨텍스트(Global Execution Context)가 푸시되는 것을 봤었다.\n그 과정이다.<br>\n그 전역 실행 컨텍스트가 전역 Lexical Environment를 생성한다.</p>\n<p>Lexical Environment 가 어떻게 생겼는지를 다시 보고 와서 참고하기를 추천한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/neekoblog/static/a2dec304bd5fb1bceb72c0e669b7162a/612f7/flow1-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWUlEQVR42nVRPYvCQBDN/0wj2JpO1GAMnHidjVX+kGBhE4mYiF/4kZwWbgJiRKO+843sYXMDL29nZjPzdsZQSmG73WK32wl/njebjfDlcsF6vUYQBIiiCGEYChPT6RTRC8ydTicYvV4P5XIZjuOgWq2iXq+jVqsJM2aaJobDITzPg2VZ6HS+0Wq10Gw2Ydu2sOu6KJVK8H0fBjtPJhPM53PMZjPpSIzHYwwGA/T7fYkfj0csl0u5S59q8jzH+Xz+49vtBoMforjf31wUoD2fTzweDzlfr1ccDgesVissFgvhOI6RxAmSnxeSRHyOxsiyDPv9XoL8KU1TKcYkfaXSV0yh2+2i0bDRbn/JMzkOzXxypVLBaDSCoVVoYzEN5ggqZ0MuiM/Wy6Iq+lTMmCyFCrlVPoU/ces0zoUXaBwDG9C0AO3r5vosM2RRdsnSTObFhC6olX4q/w+0XxYlN9dBwtHiAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"lexical\"\n        title=\"\"\n        src=\"/neekoblog/static/a2dec304bd5fb1bceb72c0e669b7162a/0b533/flow1-2.png\"\n        srcset=\"/neekoblog/static/a2dec304bd5fb1bceb72c0e669b7162a/fac75/flow1-2.png 125w,\n/neekoblog/static/a2dec304bd5fb1bceb72c0e669b7162a/63868/flow1-2.png 250w,\n/neekoblog/static/a2dec304bd5fb1bceb72c0e669b7162a/0b533/flow1-2.png 500w,\n/neekoblog/static/a2dec304bd5fb1bceb72c0e669b7162a/1d69c/flow1-2.png 750w,\n/neekoblog/static/a2dec304bd5fb1bceb72c0e669b7162a/612f7/flow1-2.png 773w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>위의 Global Lexical Environment는 GlobalEnvironmentRecord와 OuterLexicalEnvironmentReference로 구성되어 있는데 전역이기 때문에 OuterLexicalEnvironmentReference에는 null이 있을 것이다.</p>\n<p>GlobalEnvironmentRecord에는 어떤 것이 있냐면<br>\nvar 같이 전역 객체에 저장되는 것들이 존재하는 <strong>Object Environment Record</strong>와\nlet, const와 같이 호이스팅은 되지만 초기화는 안 되는 것들이 존재하는 <strong>Declarative Environment Record</strong>(선언적 환경 레코드)로 구성된다.</p>\n<p>호이스팅에서 let과 const는 선언만 된다고 했다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/neekoblog/static/bb9da4554a53be84edcd7e84ae1bb5ca/612f7/flow1-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9UlEQVR42n1Oy2qDABD0k4XgBwQ9ePMVz17UU/oX+QJFDyaRFDSgokGJ78Qpu6XQQ+nCMOzO7OwKpmnCtm1YloXD4cBM/el0gqqq0HUdmqbBMAzuSYvjGLvdDpIkQVEU7Pd7iKIIWZYhnM9nXC4XEKdpyuYgCFAUBfI8x/WaomkaDMOAqqp4Xtc17vc7sixDWZYM8hIL4zji+XximiZQ0eKyLBzsOA5834fruvA8j/l4/MA8z9i2jb1UtE9H+77/DiRhGAe8Xi/G+/3G4/FAGIaIoojDfz5PkoQPku8305F1XSFQ8u3zhrZtWey6jpk++K9I/wtf6BlheKXOeJoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"lexical\"\n        title=\"\"\n        src=\"/neekoblog/static/bb9da4554a53be84edcd7e84ae1bb5ca/0b533/flow1-3.png\"\n        srcset=\"/neekoblog/static/bb9da4554a53be84edcd7e84ae1bb5ca/fac75/flow1-3.png 125w,\n/neekoblog/static/bb9da4554a53be84edcd7e84ae1bb5ca/63868/flow1-3.png 250w,\n/neekoblog/static/bb9da4554a53be84edcd7e84ae1bb5ca/0b533/flow1-3.png 500w,\n/neekoblog/static/bb9da4554a53be84edcd7e84ae1bb5ca/1d69c/flow1-3.png 750w,\n/neekoblog/static/bb9da4554a53be84edcd7e84ae1bb5ca/612f7/flow1-3.png 773w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>마지막으로 전역 객체에 저장된다고 했던 Object Environment Record에 들어가는 애들이 전역 객체에 저장이 된다.</p>\n<p>이런 식으로 실행 컨텍스트가 식별자를 관리한다.</p>\n<hr>\n<p>여기까지 실행 컨텍스트와 Lexical Environment 그리고 호이스팅에 대해 살펴보았다.</p>\n<p>this 바인딩 그리고 더 자세히 포스팅하고 싶었지만 더 살펴보고 포스팅하고 싶어 그 부분은 미룬다.</p>\n<p>많이 어렵기 때문에 계속 봐야 하는 개념이라고 생각한다.</p>\n<p>틀린 부분 댓글 남겨주면 매우 매우 감사합니다🤗\n<a href=\"https://blog.naver.com/neeko_k/223597163448\">https://blog.naver.com/neeko_k/223597163448</a></p>","frontmatter":{"title":"호이스팅","date":"September 26, 2024","description":"호이스팅과 실행컨텍스트에 대해 살펴본다."}},"previous":{"fields":{"slug":"/protocol/"},"frontmatter":{"title":"프로토콜"}},"next":{"fields":{"slug":"/this/"},"frontmatter":{"title":"this"}}},"pageContext":{"id":"766314f6-9f3c-5904-8402-71618754a1e5","previousPostId":"178914ec-edb2-5d4c-82bb-34090b08e582","nextPostId":"19ec4ac6-10ac-53ef-b69e-dfb67fad2fd9"}},"staticQueryHashes":["2841359383","933090845"],"slicesMap":{}}