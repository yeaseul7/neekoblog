{"componentChunkName":"component---src-templates-blog-post-js","path":"/react_batching/","result":{"data":{"site":{"siteMetadata":{"title":"neekoblog"}},"markdownRemark":{"id":"4b26059f-1acc-54aa-803a-a8a0c8968e52","excerpt":"ğŸ“š Intro setStateë¥¼ í˜¸ì¶œí•˜ë©´ ReactëŠ” ì¦‰ì‹œ ë¦¬ë Œë”ë§ì„ ìˆ˜í–‰í•˜ì§€ ì•Šê³  í•´ë‹¹ ì—…ë°ì´íŠ¸ë¥¼ íì— ë“±ë¡í•œ í›„ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì˜ ì‹¤í–‰ì´ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤.\n\nì´ ë¶€ë¶„ê³¼ batchingUpdateì´ë‘ ì—°ê´€ì´ ìˆë‹¤ê³  í•˜ëŠ”ë° \nbatchingUpdateì´ ë¬´ì—‡ì¸ì§€ ê·¸ë¦¬ê³  Reactâ€¦","html":"<h3>ğŸ“š Intro</h3>\n<p>setStateë¥¼ í˜¸ì¶œí•˜ë©´ ReactëŠ” ì¦‰ì‹œ ë¦¬ë Œë”ë§ì„ ìˆ˜í–‰í•˜ì§€ ì•Šê³  í•´ë‹¹ ì—…ë°ì´íŠ¸ë¥¼ íì— ë“±ë¡í•œ í›„ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì˜ ì‹¤í–‰ì´ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤.\n<br/>\nì´ ë¶€ë¶„ê³¼ batchingUpdateì´ë‘ ì—°ê´€ì´ ìˆë‹¤ê³  í•˜ëŠ”ë° <br/>\nbatchingUpdateì´ ë¬´ì—‡ì¸ì§€ ê·¸ë¦¬ê³  React 18ì— ìƒˆë¡­ê²Œ ì¶”ê°€ëœ ê²ƒì´ ë¬´ì—‡ì¸ì§€ ë¬´ì§€ìƒíƒœì—ì„œ íŒŒí•´ì³ë³´ê¸°ë¡œ í•œë‹¤.</p>\n<hr>\n<h3>Batching</h3>\n<p>stateëŠ” ê° ëœë”ë§ë§ˆë‹¤ ê³ ì •ë˜ì–´ìˆëŠ”ë° ë§Œì•½ stateê°€ ì—¬ëŸ¬ê°œ ë°”ë€Œë©´ ì–´ë–»ê²Œ ë ê¹Œ?<br/>\nsetNumber()ì™€ setName()ì´ëŸ° í•¨ìˆ˜ê°€ ì—¬ëŸ¬ë²ˆ ë‚˜ë‰˜ì–´ì„œ ì‹¤í–‰ë˜ë‚˜?<br/></p>\n<p>ì•„ë‹ˆë‹¤.<br/>\në¶ˆí•„ìš”í•œ ëœë”ë§ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì˜ ëª¨ë“  ì½”ë“œê°€ ì‹¤í–‰ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤.<br/>\nì¦‰, stateì˜ ì—…ë°ì´íŠ¸ ì‘ì—…ì„ ëª¨ì•„ ì¼ê´„ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì„ Batchingì´ë¼ê³  í•œë‹¤.<br/></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">increaseCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ì•„ë˜ ì‘ì—…ë“¤ì€ ì¼ê´„ì‘ì—…ìœ¼ë¡œ ì²˜ë¦¬ëœë‹¤.</span>\n    <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev</span> <span class=\"token operator\">=></span> prev <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev</span> <span class=\"token operator\">=></span> prev <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev</span> <span class=\"token operator\">=></span> prev <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>increaseCount<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">+1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Count : </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Counter</code></pre></div>\n<p>ReactëŠ” ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œëœ setStateë¥¼ ë‚´ë¶€ì ìœ¼ë¡œ íì— ëª¨ì•„ë‘ê³  í•˜ë‚˜ì˜ ì¼ê´„ ì‘ì—…(batch)ìœ¼ë¡œ ì²˜ë¦¬í•´ ë‹¨ í•œ ë²ˆë§Œ ë¦¬ë Œë”ë§ì„ ë°œìƒì‹œí‚¨ë‹¤.</p>\n<hr>\n<h3>React 18ì— ì¶”ê°€ëœ Automatic Batching</h3>\n<p>ê¸°ì¡´ì— batchingì€ ì–¸ì œ ìƒíƒœë¥¼ ë¬¶ì–´ì„œ ì²˜ë¦¬í•˜ëŠ”ì§€ ì¼ê´€ë˜ì§€ ì•Šì•˜ë‹¤ëŠ” ë¬¸ì œì ì´ ìˆì—ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>flag<span class=\"token punctuation\">,</span> setFlag<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetchSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// React 17 ì´í•˜ì—ì„œëŠ” batchingì´ ë°œìƒí•˜ì§€ ì•ŠìŒ</span>\n      <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span> <span class=\"token operator\">=></span> c <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ë¦¬ë Œë”ë§ ë°œìƒ</span>\n      <span class=\"token function\">setFlag</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">f</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span>f<span class=\"token punctuation\">)</span> <span class=\"token comment\">// ë˜ ë‹¤ì‹œ ë¦¬ë Œë”ë§ ë°œìƒ</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Next</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> flag <span class=\"token operator\">?</span> <span class=\"token string\">\"blue\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"black\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ìœ„ì—ì²˜ëŸ¼ onClick ê°™ì€ React ì´ë²¤íŠ¸ í—¨ë“¤ëŸ¬ ë‚´ë¶€ì—ì„œë§Œ batchê°€ ë°œìƒí–ˆë‹¤.\nfetch, serTimeout, Promise ì½œë°± ë‚´ë¶€ì—ì„œëŠ” batchingì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.</p>\n<p>ë•Œë¬¸ì— ìœ„ì˜ ì½”ë“œì—ì„œ ë‘ë²ˆì˜ ë Œë”ë§ì´ ë°œìƒí•œë‹¤.</p>\n<p>í•˜ì§€ë§Œ React 18 ì´ë£¨ë¶€í„°ëŠ” fetchë‚˜ serTimeoutì•ˆì—ì„œëŠ” ìƒíƒœ ì—…ë°ì´íŠ¸ë„ ìë™ batchingëœë‹¤.</p>\n<p>React 18ì—ì„œëŠ” createRootë¥¼ ì‚¬ìš©í•˜ë©´ ìë™ ë°°ì¹­ì´ ê¸°ë³¸ ì ìš©ëœë‹¤.\nReactDOM.render()ë°©ì‹ì€ ì—¬ì „íˆ 2ë²ˆì˜ ë¦¬ë Œë”ë§ì´ ì¼ì–´ë‚œë‹¤.</p>\n<h4>legacy render</h4>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span> <span class=\"token comment\">// ì˜› ë°©ì‹</span>\n<span class=\"token comment\">// ...</span>\n<span class=\"token keyword\">const</span> rootElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span>\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span> rootElement<span class=\"token punctuation\">)</span></code></pre></div>\n<h4>create Root</h4>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> ReactDOMClient <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/client\"</span> <span class=\"token comment\">// React 18 ë°©ì‹</span>\n<span class=\"token comment\">// ...</span>\n<span class=\"token keyword\">const</span> rootElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOMClient<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>rootElement<span class=\"token punctuation\">)</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<hr>\n<h3>ì°¸ê³  ìë£Œ</h3>\n<ul>\n<li><a href=\"https://github.com/reactwg/react-18/discussions/21\">Automatic batching for fewer renders in React 18</a></li>\n</ul>","frontmatter":{"title":"reactì˜ batchingUpdate","date":"May 27, 2025","description":"ì—¬ëŸ¬ ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ í•˜ë‚˜ì˜ ë¦¬ë Œë”ë§ìœ¼ë¡œ ê·¸ë£¹í™”í•˜ëŠ” ìµœì í™” ê¸°ë²•"}},"previous":{"fields":{"slug":"/webserver/"},"frontmatter":{"title":"ì›¹ì„œë²„"}},"next":null},"pageContext":{"id":"4b26059f-1acc-54aa-803a-a8a0c8968e52","previousPostId":"fb85b0c2-668e-5faa-a7cf-93092377ecdf","nextPostId":null}},"staticQueryHashes":["1469588348","2841359383"],"slicesMap":{}}