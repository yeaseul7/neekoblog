{"componentChunkName":"component---src-templates-blog-post-js","path":"/this/","result":{"data":{"site":{"siteMetadata":{"title":"neekoblog"}},"markdownRemark":{"id":"19ec4ac6-10ac-53ef-b69e-dfb67fad2fd9","excerpt":"실행 컨텍스트를 공부하다가 this에 대한 얘기를 들었다. this는 javascript에서 논란이 많은? 친구이다. 먼저 this가 무엇이냐? 함수가 호출될 때 정해지는 함수 컨텍스트이다. 귀에 걸면 귀걸이 코에 걸면 코걸이 같은 것이다.😂 javascript…","html":"<p>실행 컨텍스트를 공부하다가 this에 대한 얘기를 들었다.<br>\nthis는 javascript에서 논란이 많은? 친구이다.</p>\n<p>먼저 this가 무엇이냐?</p>\n<p>함수가 호출될 때 정해지는 함수 컨텍스트이다.<br>\n귀에 걸면 귀걸이 코에 걸면 코걸이 같은 것이다.😂</p>\n<p>javascript는 호출될 때\n인자, arguments 객체, this를 전달받는다.<br>\n이렇게 전달받을 때마다 어떤 걸 바인딩 하는지 결정한다.</p>\n<p>함수 컨텍스트, 실행 컨텍스트에 대해서는 <a href=\"https://blog.naver.com/neeko_k\">저번 포스팅</a>에서 다뤘다.<br>\n기본적으로 this는 전역 객체에 바인딩 된다.<br>\n이는 혼동을 야기할 수 있다.</p>\n<p>이게 무슨 말이야~\n싶겠지만 함수가 어떻게 호출되고 그에 따가 어떤 식으로 달라지는지 살펴보자.</p>\n<hr>\n<h3>함수 호출 방식</h3>\n<p>함수 호출 방식은</p>\n<ol>\n<li>일반 함수 호출</li>\n<li>메서드 호출</li>\n<li>생성자 함수 호출</li>\n<li>call, apply, bind 사용\n이렇게 4가지가 있다.</li>\n</ol>\n<p>그러면 각각 자세히 어떻게 하는건지 알아보자</p>\n<h4>일반 함수 호출</h4>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//일반 함수</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//외부함수</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add's this: \"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// window , \"use strict\"에서는 undefined나옴</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">add2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//내부함수</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add2's this: \"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// window , \"use strict\"에서는 undefined나옴</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">add2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">//화살표 함수</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 외부 함수</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add's this: \"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// window (전역 모드) 또는 undefined (\"use strict\" 모드)</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add2</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 내부 화살표 함수</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add2's this: \"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// add()의 this를 참조</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">add2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>일반 함수 호출에서 this는 다른 함수 안에 있는 내부 함수에서 전역 객체에 바인딩된다.\n이런 this의 전역 바인딩을 막기 위해서는 arrow function을 사용하는 방법이 있다.</p>\n<p>arrow function은 es6에 나왔다.</p>\n<p>arrow function의 this는 뭐가 다르다는 걸까?<br>\nes6에서 this는 **정의된 스코프(Lexical scope)**를 참조한다.<br>\n따라서 상위 환경의 this를 계승 받는다.</p>\n<p>즉 arrow function은 자신이 정의된 위치에서 this를 사용한다.</p>\n<h4>메서드 호출</h4>\n<p>아래의 예시에서 add는 메서드 호출이고 add2는 함수 내부에서 정의된 일반함수이다.<br>\n따라서 독립적인 함수 호출이다.<br>\n하지만 위에서 설명했던 것처럼 화살표 함수를 사용하면 Lexical scope에 의해 상위 스코프를 참조하여 obj를 가리키게 할 수 있다.<br>\n또 다른 변수에 this를 할당해서 사용하는 방법도 있다.</p>\n<p>⚠️메서드를 화살표 함수로 정의하면 그 함수의 상위 스코프를 받기 때문에 전역 객체를 의미할 수 있다.<br>\n일반 함수로 작성하고 내부 함수를 화살표 함수로 작성하면 생각하는 대로 계승될 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> methodValue <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">add</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//메서드</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add's this: \"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// obj</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add's this.value: \"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 100</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">add2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">//내부함수</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add2's this: \"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// window</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add2's this.value: \"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">add2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//화살표 함수 쓰는 버전</span>\n<span class=\"token keyword\">let</span> methodValue <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">add</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//메서드</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add's this: \"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// obj</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add's this.value: \"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 100</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add2</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">//화살표 함수</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add2's this: \"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// obj</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add2's this.value: \"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 100</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">add2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nobj<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//다른 변수에 this를 할당해서 사용하는 방법</span>\n\n<span class=\"token keyword\">let</span> methodValue <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">add</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> that <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//메서드</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add's this: \"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// obj</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add's this.value: \"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 100</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">add2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">//내부함수</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add2's that: \"</span><span class=\"token punctuation\">,</span> that<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// obj</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add2's that.value: \"</span><span class=\"token punctuation\">,</span> that<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 100    }</span>\n    <span class=\"token function\">add2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4>생성자 함수 호출</h4>\n<p>javascript에서는 new를 사용해서 생성자 함수를 만들고 호출할 수 있다.<br>\n생성자 함수에서 this는 프로퍼티를 상속한다.</p>\n<p>아래에서 생성자 함수를 만드는 방법과 동작 방법을 보여준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 생성자 함수는 대문자로 시작한다.</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//prototype 객체로 메소드를 가질 수 있다.</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">getName</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> me <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Lee\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// this에 바인딩 될 객체는 me이다.</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>me<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//Lee</span>\n\n<span class=\"token comment\">//new를 붙이지 않을 경우 생성자 함수 아님</span>\n<span class=\"token keyword\">let</span> you <span class=\"token operator\">=</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Park\"</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>you<span class=\"token punctuation\">)</span> <span class=\"token comment\">// undefined</span>\n\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"Kim\"</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//Kim</span>\n<span class=\"token comment\">//이렇게 this의 속성을 변경할 수 있다.</span></code></pre></div>\n<p>위의 과정을 그림으로 그리면 아래와 같이 나타난다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/neekoblog/static/1d54bc915301fea178b3055208d6e605/612f7/this.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAACCUlEQVR42mPoOulR0XTYsbX9hEtT0xGn5vYTri0zL4crMwDBli1LBdcsX163dtWqljUrVjRtWLWqdd2qVdW5ubkgeVE+Pj4hIM0GxOxAzALSw7DkVv7/jTd7/6+41PRv3dXOvxsfNf7vPOCXBJRibW6vdzhz8uT/S+fP/794/vw/IP5/7ODBf7uWLTMB6b125ozRo3v35t+9eXP6jx8/pj169KiN4eDDeX9evHry/+jZPf9u3bv69/6n0/87j/iEgzRMntxndPr0mf/nLlz8/+Dhw38PHz/5f+bUmT8Le3psQPIPb95M+A8EH9+//wOiHz58+J9hwslg5wlHg306dkaE9BwI9Zt0ItR79pVQkFcYbm2byH55ySTrS0un2m+d1u25a3qn17Yprc6rpkzhAclfv33b6vOXLyc/v3t35Mvnz8fu37+/hQEG7EOzeEJDQ5mhXEYwuf8/B8Oa/3YMm/87sM2+68vQfjaYoemUH0P9fh6YvlUMDMw+DAxccD2r/kMMcQ0MFDO2NZasn1/P4ZNWzwWWXPrM2Pjo7/8+hz/8iznz7Z//sc//TfZ++ic177rVfwYGDn8TE1lLPT0x47Q0VpDy+vp6JrgLjY3TWLXsQ3mMfdK4tELreYAamBj6zxt47Xv1O/XAo3/Jx179ST/87L/7npffGebe0wdr4pUSBpL8oAiEGQQAu//879XG8yYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"thisPrototype\"\n        title=\"\"\n        src=\"/neekoblog/static/1d54bc915301fea178b3055208d6e605/0b533/this.png\"\n        srcset=\"/neekoblog/static/1d54bc915301fea178b3055208d6e605/fac75/this.png 125w,\n/neekoblog/static/1d54bc915301fea178b3055208d6e605/63868/this.png 250w,\n/neekoblog/static/1d54bc915301fea178b3055208d6e605/0b533/this.png 500w,\n/neekoblog/static/1d54bc915301fea178b3055208d6e605/1d69c/this.png 750w,\n/neekoblog/static/1d54bc915301fea178b3055208d6e605/612f7/this.png 773w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h4>생성자 함수 동작 방법 찍먹하기</h4>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 생성자 함수는 대문자로 시작한다.</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Car</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 생성자 함수 코드 실행 전</span>\n  <span class=\"token comment\">// 생성할 빈 객체 생성 => \"복사본 만든대~ 빈 종이 가져와\"</span>\n  <span class=\"token comment\">// this가 빈 객체를 가리킴 => \"내용 여기에 넣으면 돼?\"</span>\n  <span class=\"token comment\">// 빈 객체 : Car의 프로퍼티가 가르키는 객체를 자신의 prototype 객체로 설정 => \"빈종이 : 나 이번 복사에 들어간다\"</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> name <span class=\"token comment\">// this를 통해 프로퍼티 및 메소드 추가 => \"복사중 ...\"</span>\n  <span class=\"token comment\">// this를 통해 생성자 함수가 생성할 인스턴스에 동적으로 프로퍼티를 생성하고 초기화</span>\n  <span class=\"token comment\">// 생성된 함수 반환</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> myCar <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Car</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sm5\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// this가 가리키는 인스턴스를 반환</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>myCar<span class=\"token punctuation\">)</span> <span class=\"token comment\">// {type: \"sm5\"}</span></code></pre></div>\n<ol>\n<li>생성자 함수 코드 실행 전 생성자 함수가 새로 생성할 객체인 빈 객체를 생성</li>\n<li>그리고 생성자 함수 안에 있는 this가 이 빈 객체를 가리킴</li>\n<li>빈 객체도 생성자 함수의 prototype 프로퍼티가 가리키는 객체를 자신의 prototype 객체로 설정</li>\n<li>이후 생성된 빈 객체에 this를 통해 프로퍼티와 메서드 등을 추가한다.</li>\n<li>마지막으로 생성된 객체를 반환한다.</li>\n</ol>\n<p><em>이때 어떤 걸 반환하느냐에 따라 this 바인딩이 끊길 수도 있고 반환값이 무시될 수 있다.</em></p>\n<p>마지막에 생성된 객체를 반환하지 않으면\n예상과 다른 값이 출력될 수 있다.</p>\n<p>그 경우를 아래에 예시를 통해 설명한다.</p>\n<h4>생성자 함수가 다른 값을 반환하는 경우</h4>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 다른 객체를 반환하는 경우</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">ExceptionConstructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 생성자 함수 코드 실행 전</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> name\n  <span class=\"token comment\">// this를 통해 생성자 함수가 생성할 인스턴스에 동적으로 프로퍼티를 생성하고 초기화</span>\n  <span class=\"token comment\">// 다른 개체를 반환하면 this가 아닌 해당 객체가 반환</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">year</span><span class=\"token operator\">:</span> <span class=\"token number\">2022</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> myCar2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ExceptionConstructor</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sm5\"</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>myCar2<span class=\"token punctuation\">)</span> <span class=\"token comment\">// {year: 2022} 생성자 함수 역할을 못해서 this가 아닌 다른 객체 반환 prototype도 없음</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//기본값을 반환하는 경우</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">ExceptionConstructor2</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 생성자 함수 코드 실행 전</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> name\n  <span class=\"token comment\">// this를 통해 생성자 함수가 생성할 인스턴스에 동적으로 프로퍼티를 생성하고 초기화</span>\n  <span class=\"token comment\">// 기본타입을 반환하면 this가 반환</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">42</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> myCar3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ExceptionConstructor</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sm5\"</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>myCar2<span class=\"token punctuation\">)</span> <span class=\"token comment\">// {type: \"sm5\"} 반환 값이 무시되고 this가 반환</span></code></pre></div>\n<h4>call, apply, bind 사용</h4>\n<p>이 방법은 명시적으로 this 바인딩 하는 방법이다.\n위에서는 this를 명시적으로 바인딩 하지 않았기 때문에 이런 작동 방식을 이해하기 전까지는 왜 저 값이 나오는지 모를 수 있다.\n이 함수들은 Function.prototype 객체의 메서드이다.</p>\n<p><strong>Function.prototype.apply, Function.prototype.call는 함수를 실행하지만<br>\nFunction.prototype.bind는 함수에 인자로 전달한 this가 바인딩 된 새로운 함수를 리턴하지 실행하지 않는다는 차이가 있다.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> useThisMethodsValue <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n\n<span class=\"token keyword\">const</span> useThisMethodsObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">add</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> that <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add's this: \"</span><span class=\"token punctuation\">,</span> that<span class=\"token punctuation\">)</span> <span class=\"token comment\">// avoidGloabalObj</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add's this.value: \"</span><span class=\"token punctuation\">,</span> that<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 100</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">add2</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add2's this: \"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// avoidGloabalObj</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add2's this.value: \"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 100</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"add2's arguments: \"</span><span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1, 2</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">add2</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>useThisMethodsObj<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">add2</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>useThisMethodsObj<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">add2</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>useThisMethodsObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\nuseThisMethodsObj<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<hr>\n<h3>마무리</h3>\n<p>이렇게 함수를 호출하는 방식을 쭉 나열했다.</p>\n<p>그리고 그 안에서 this가 어떻게 바인딩 되는지 코드 예시를 통해 설명했다.</p>\n<p>한 번에 이해하기 복잡할 수 있다.</p>\n<p>이럴 땐 전역 객체를 한다고 하고 아닐 땐 또 다르다고 하고</p>\n<p>​</p>\n<p>내가 생각하기에 기본적으로 this는 전역 객체를 바인딩 하기 때문에 화살표 함수를 사용해서 상위 스코프를 참조하는 방식으로 예측 가능한 코드를 짜는 것이 좋아 보인다.</p>\n<p>다만 그 과정에서 주의해야 하는 부분도 있기 때문에 그 부분에 대해서도 다시 되짚어보기를 바란다.</p>\n<p>​</p>","frontmatter":{"title":"this","date":"October 02, 2024","description":"javascript의 this 개념에 대해"}},"previous":{"fields":{"slug":"/hoisting/"},"frontmatter":{"title":"호이스팅"}},"next":{"fields":{"slug":"/reactState/"},"frontmatter":{"title":"react의 상태(State)에 대해"}}},"pageContext":{"id":"19ec4ac6-10ac-53ef-b69e-dfb67fad2fd9","previousPostId":"766314f6-9f3c-5904-8402-71618754a1e5","nextPostId":"170b6fb7-d225-58ad-b3b6-04607eb0f083"}},"staticQueryHashes":["2841359383","933090845"],"slicesMap":{}}